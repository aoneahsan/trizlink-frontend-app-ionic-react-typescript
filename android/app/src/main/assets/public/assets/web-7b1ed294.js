import{W as R,_ as F,M as U,L as $}from"./index-4716159d.js";var S=function o(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(s=n;s--!==0;)if(!o(t[s],e[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[s]))return!1;for(s=n;s--!==0;){var a=i[s];if(!o(t[a],e[a]))return!1}return!0}return t!==t&&e!==e};function P(o,t,e,n,s,i){if(s-n<=e)return;const a=n+s>>1;j(o,t,a,n,s,i%2),P(o,t,e,n,a-1,i+1),P(o,t,e,a+1,s,i+1)}function j(o,t,e,n,s,i){for(;s>n;){if(s-n>600){const c=s-n+1,u=e-n+1,d=Math.log(c),p=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*p*(c-p)/c)*(u-c/2<0?-1:1),h=Math.max(n,Math.floor(e-u*p/c+m)),f=Math.min(s,Math.floor(e+(c-u)*p/c+m));j(o,t,e,h,f,i)}const a=t[2*e+i];let l=n,r=s;for(M(o,t,n,e),t[2*s+i]>a&&M(o,t,n,s);l<r;){for(M(o,t,l,r),l++,r--;t[2*l+i]<a;)l++;for(;t[2*r+i]>a;)r--}t[2*n+i]===a?M(o,t,n,r):(r++,M(o,t,r,s)),r<=e&&(n=r+1),e<=r&&(s=r-1)}}function M(o,t,e,n){I(o,e,n),I(t,2*e,2*n),I(t,2*e+1,2*n+1)}function I(o,t,e){const n=o[t];o[t]=o[e],o[e]=n}function H(o,t,e,n,s,i,a){const l=[0,o.length-1,0],r=[];let c,u;for(;l.length;){const d=l.pop(),p=l.pop(),m=l.pop();if(p-m<=a){for(let g=m;g<=p;g++)c=t[2*g],u=t[2*g+1],c>=e&&c<=s&&u>=n&&u<=i&&r.push(o[g]);continue}const h=Math.floor((m+p)/2);c=t[2*h],u=t[2*h+1],c>=e&&c<=s&&u>=n&&u<=i&&r.push(o[h]);const f=(d+1)%2;(d===0?e<=c:n<=u)&&(l.push(m),l.push(h-1),l.push(f)),(d===0?s>=c:i>=u)&&(l.push(h+1),l.push(p),l.push(f))}return r}function W(o,t,e,n,s,i){const a=[0,o.length-1,0],l=[],r=s*s;for(;a.length;){const c=a.pop(),u=a.pop(),d=a.pop();if(u-d<=i){for(let g=d;g<=u;g++)T(t[2*g],t[2*g+1],e,n)<=r&&l.push(o[g]);continue}const p=Math.floor((d+u)/2),m=t[2*p],h=t[2*p+1];T(m,h,e,n)<=r&&l.push(o[p]);const f=(c+1)%2;(c===0?e-s<=m:n-s<=h)&&(a.push(d),a.push(p-1),a.push(f)),(c===0?e+s>=m:n+s>=h)&&(a.push(p+1),a.push(u),a.push(f))}return l}function T(o,t,e,n){const s=o-e,i=t-n;return s*s+i*i}const K=o=>o[0],V=o=>o[1];class Z{constructor(t,e=K,n=V,s=64,i=Float64Array){this.nodeSize=s,this.points=t;const a=t.length<65536?Uint16Array:Uint32Array,l=this.ids=new a(t.length),r=this.coords=new i(t.length*2);for(let c=0;c<t.length;c++)l[c]=c,r[2*c]=e(t[c]),r[2*c+1]=n(t[c]);P(l,r,s,0,l.length-1,0)}range(t,e,n,s){return H(this.ids,this.coords,t,e,n,s,this.nodeSize)}within(t,e,n){return W(this.ids,this.coords,t,e,n,this.nodeSize)}}const J={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:o=>o},x=Math.fround||(o=>t=>(o[0]=+t,o[0]))(new Float32Array(1));class X{constructor(t){this.options=w(Object.create(J),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:s,nodeSize:i}=this.options;e&&console.time("total time");const a=`prepare ${t.length} points`;e&&console.time(a),this.points=t;let l=[];for(let r=0;r<t.length;r++)t[r].geometry&&l.push(Y(t[r],r));this.trees[s+1]=new Z(l,z,B,i,Float32Array),e&&console.timeEnd(a);for(let r=s;r>=n;r--){const c=+Date.now();l=this._cluster(l,r),this.trees[r]=new Z(l,z,B,i,Float32Array),e&&console.log("z%d: %d clusters in %dms",r,l.length,+Date.now()-c)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,t[1]));let i=t[2]===180?180:((t[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const u=this.getClusters([n,s,180,a],e),d=this.getClusters([-180,s,i,a],e);return u.concat(d)}const l=this.trees[this._limitZoom(e)],r=l.range(k(n),C(a),k(i),C(s)),c=[];for(const u of r){const d=l.points[u];c.push(d.numPoints?A(d):this.points[d.index])}return c}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),s="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(s);const a=i.points[e];if(!a)throw new Error(s);const l=this.options.radius/(this.options.extent*Math.pow(2,n-1)),r=i.within(a.x,a.y,l),c=[];for(const u of r){const d=i.points[u];d.parentId===t&&c.push(d.numPoints?A(d):this.points[d.index])}if(c.length===0)throw new Error(s);return c}getLeaves(t,e,n){e=e||10,n=n||0;const s=[];return this._appendLeaves(s,t,e,n,0),s}getTile(t,e,n){const s=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:a,radius:l}=this.options,r=l/a,c=(n-r)/i,u=(n+1+r)/i,d={features:[]};return this._addTileFeatures(s.range((e-r)/i,c,(e+1+r)/i,u),s.points,e,n,i,d),e===0&&this._addTileFeatures(s.range(1-r/i,c,1,u),s.points,i,n,i,d),e===i-1&&this._addTileFeatures(s.range(0,c,r/i,u),s.points,-1,n,i,d),d.features.length?d:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,n.length!==1)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,s,i){const a=this.getChildren(e);for(const l of a){const r=l.properties;if(r&&r.cluster?i+r.point_count<=s?i+=r.point_count:i=this._appendLeaves(t,r.cluster_id,n,s,i):i<s?i++:t.push(l),t.length===n)break}return i}_addTileFeatures(t,e,n,s,i,a){for(const l of t){const r=e[l],c=r.numPoints;let u,d,p;if(c)u=D(r),d=r.x,p=r.y;else{const f=this.points[r.index];u=f.properties,d=k(f.geometry.coordinates[0]),p=C(f.geometry.coordinates[1])}const m={type:1,geometry:[[Math.round(this.options.extent*(d*i-n)),Math.round(this.options.extent*(p*i-s))]],tags:u};let h;c?h=r.id:this.options.generateId?h=r.index:this.points[r.index].id&&(h=this.points[r.index].id),h!==void 0&&(m.id=h),a.features.push(m)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:s,extent:i,reduce:a,minPoints:l}=this.options,r=s/(i*Math.pow(2,e));for(let c=0;c<t.length;c++){const u=t[c];if(u.zoom<=e)continue;u.zoom=e;const d=this.trees[e+1],p=d.within(u.x,u.y,r),m=u.numPoints||1;let h=m;for(const f of p){const g=d.points[f];g.zoom>e&&(h+=g.numPoints||1)}if(h>m&&h>=l){let f=u.x*m,g=u.y*m,L=a&&m>1?this._map(u,!0):null;const b=(c<<5)+(e+1)+this.points.length;for(const N of p){const y=d.points[N];if(y.zoom<=e)continue;y.zoom=e;const _=y.numPoints||1;f+=y.x*_,g+=y.y*_,y.parentId=b,a&&(L||(L=this._map(u,!0)),a(L,this._map(y)))}u.parentId=b,n.push(Q(f/h,g/h,b,h,L))}else if(n.push(u),h>1)for(const f of p){const g=d.points[f];g.zoom<=e||(g.zoom=e,n.push(g))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?w({},t.properties):t.properties;const n=this.points[t.index].properties,s=this.options.map(n);return e&&s===n?w({},s):s}}function Q(o,t,e,n,s){return{x:x(o),y:x(t),zoom:1/0,id:e,parentId:-1,numPoints:n,properties:s}}function Y(o,t){const[e,n]=o.geometry.coordinates;return{x:x(k(e)),y:x(C(n)),zoom:1/0,index:t,parentId:-1}}function A(o){return{type:"Feature",id:o.id,properties:D(o),geometry:{type:"Point",coordinates:[q(o.x),tt(o.y)]}}}function D(o){const t=o.numPoints,e=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?`${Math.round(t/100)/10}k`:t;return w(w({},o.properties),{cluster:!0,cluster_id:o.id,point_count:t,point_count_abbreviated:e})}function k(o){return o/360+.5}function C(o){const t=Math.sin(o*Math.PI/180),e=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return e<0?0:e>1?1:e}function q(o){return(o-.5)*360}function tt(o){const t=(180-o*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function w(o,t){for(const e in t)o[e]=t[e];return o}function z(o){return o.x}function B(o){return o.y}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function et(o,t){var e={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&t.indexOf(n)<0&&(e[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(e[n[s]]=o[n[s]]);return e}class O{constructor({markers:t,position:e}){this.markers=t,e&&(e instanceof google.maps.LatLng?this._position=e:this._position=new google.maps.LatLng(e))}get bounds(){if(!(this.markers.length===0&&!this._position))return this.markers.reduce((t,e)=>t.extend(e.getPosition()),new google.maps.LatLngBounds(this._position,this._position))}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(t=>t.getVisible()).length}push(t){this.markers.push(t)}delete(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}class nt{constructor({maxZoom:t=16}){this.maxZoom=t}noop({markers:t}){return st(t)}}const st=o=>o.map(e=>new O({position:e.getPosition(),markers:[e]}));class G extends nt{constructor(t){var{maxZoom:e,radius:n=60}=t,s=et(t,["maxZoom","radius"]);super({maxZoom:e}),this.superCluster=new X(Object.assign({maxZoom:this.maxZoom,radius:n},s)),this.state={zoom:null}}calculate(t){let e=!1;if(!S(t.markers,this.markers)){e=!0,this.markers=[...t.markers];const s=this.markers.map(i=>({type:"Feature",geometry:{type:"Point",coordinates:[i.getPosition().lng(),i.getPosition().lat()]},properties:{marker:i}}));this.superCluster.load(s)}const n={zoom:t.map.getZoom()};return e||this.state.zoom>this.maxZoom&&n.zoom>this.maxZoom||(e=e||!S(this.state,n)),this.state=n,e&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:e}}cluster({map:t}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(this.transformCluster.bind(this))}transformCluster({geometry:{coordinates:[t,e]},properties:n}){if(n.cluster)return new O({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map(s=>s.properties.marker),position:new google.maps.LatLng({lat:e,lng:t})});{const s=n.marker;return new O({markers:[s],position:s.getPosition()})}}}class it{constructor(t,e){this.markers={sum:t.length};const n=e.map(i=>i.count),s=n.reduce((i,a)=>i+a,0);this.clusters={count:e.length,markers:{mean:s/e.length,sum:s,min:Math.min(...n),max:Math.max(...n)}}}}class ot{render({count:t,position:e},n){const s=t>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff",i=window.btoa(`
  <svg fill="${s}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">
    <circle cx="120" cy="120" opacity=".6" r="70" />
    <circle cx="120" cy="120" opacity=".3" r="90" />
    <circle cx="120" cy="120" opacity=".2" r="110" />
  </svg>`);return new google.maps.Marker({position:e,icon:{url:`data:image/svg+xml;base64,${i}`,scaledSize:new google.maps.Size(45,45)},label:{text:String(t),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:`Cluster of ${t} markers`,zIndex:Number(google.maps.Marker.MAX_ZINDEX)+t})}}function rt(o,t){for(let e in t.prototype)o.prototype[e]=t.prototype[e]}class E{constructor(){rt(E,google.maps.OverlayView)}}var v;(function(o){o.CLUSTERING_BEGIN="clusteringbegin",o.CLUSTERING_END="clusteringend",o.CLUSTER_CLICK="click"})(v||(v={}));const at=(o,t,e)=>{e.fitBounds(t.bounds)};class lt extends E{constructor({map:t,markers:e=[],algorithm:n=new G({}),renderer:s=new ot,onClusterClick:i=at}){super(),this.markers=[...e],this.clusters=[],this.algorithm=n,this.renderer=s,this.onClusterClick=i,t&&this.setMap(t)}addMarker(t,e){this.markers.includes(t)||(this.markers.push(t),e||this.render())}addMarkers(t,e){t.forEach(n=>{this.addMarker(n,!0)}),e||this.render()}removeMarker(t,e){const n=this.markers.indexOf(t);return n===-1?!1:(t.setMap(null),this.markers.splice(n,1),e||this.render(),!0)}removeMarkers(t,e){let n=!1;return t.forEach(s=>{n=this.removeMarker(s,!0)||n}),n&&!e&&this.render(),n}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const t=this.getMap();if(t instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,v.CLUSTERING_BEGIN,this);const{clusters:e,changed:n}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});(n||n==null)&&(this.reset(),this.clusters=e,this.renderClusters()),google.maps.event.trigger(this,v.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(t=>t.setMap(null)),this.clusters.forEach(t=>t.delete()),this.clusters=[]}renderClusters(){const t=new it(this.markers,this.clusters),e=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,t),this.onClusterClick&&n.marker.addListener("click",s=>{google.maps.event.trigger(this,v.CLUSTER_CLICK,n),this.onClusterClick(s,n,e)})),n.marker.setMap(e)})}}class ut extends R{constructor(){super(...arguments),this.gMapsRef=void 0,this.maps={},this.currMarkerId=0,this.onClusterClickHandler=(t,e,n)=>{var s,i;const a=this.getIdFromMap(n),l=[];if(e.markers!=null)for(const r of e.markers){const c=this.getIdFromMarker(a,r);l.push({markerId:c,latitude:(s=r.getPosition())===null||s===void 0?void 0:s.lat(),longitude:(i=r.getPosition())===null||i===void 0?void 0:i.lng(),title:r.getTitle(),snippet:""})}this.notifyListeners("onClusterClick",{mapId:a,latitude:e.position.lat(),longitude:e.position.lng(),size:e.count,items:l})}}getIdFromMap(t){for(const e in this.maps)if(this.maps[e].map==t)return e;return""}getIdFromMarker(t,e){for(const n in this.maps[t].markers)if(this.maps[t].markers[n]==e)return n;return""}async importGoogleLib(t){if(this.gMapsRef===void 0){const e=await F(()=>import("./index.esm-823fb817.js"),[]),s=await new e.Loader({apiKey:t??"",version:"weekly",libraries:["places"]}).load();this.gMapsRef=s.maps,console.log("Loaded google maps API")}}async setCamera(t){this.maps[t.id].map.moveCamera({center:t.config.coordinate,heading:t.config.bearing,tilt:t.config.angle,zoom:t.config.zoom})}async getMapType(t){let e=this.maps[t.id].map.getMapTypeId();if(e!==void 0)return e==="roadmap"&&(e=U.Normal),{type:e};throw new Error("Map type is undefined")}async setMapType(t){this.maps[t.id].map.setMapTypeId(t.mapType)}async enableIndoorMaps(t){throw new Error("Method not supported on web.")}async enableTrafficLayer(t){var e;const n=(e=this.maps[t.id].trafficLayer)!==null&&e!==void 0?e:new google.maps.TrafficLayer;t.enabled?(n.setMap(this.maps[t.id].map),this.maps[t.id].trafficLayer=n):this.maps[t.id].trafficLayer&&(n.setMap(null),this.maps[t.id].trafficLayer=void 0)}async enableAccessibilityElements(t){throw new Error("Method not supported on web.")}dispatchMapEvent(t){throw new Error("Method not supported on web.")}async enableCurrentLocation(t){if(t.enabled)if(navigator.geolocation)navigator.geolocation.getCurrentPosition(e=>{const n={lat:e.coords.latitude,lng:e.coords.longitude};this.maps[t.id].map.setCenter(n),this.notifyListeners("onMyLocationButtonClick",{}),this.notifyListeners("onMyLocationClick",{})},()=>{throw new Error("Geolocation not supported on web browser.")});else throw new Error("Geolocation not supported on web browser.")}async setPadding(t){const e=this.maps[t.id].map.getBounds();e!==void 0&&this.maps[t.id].map.fitBounds(e,t.padding)}async getMapBounds(t){const e=this.maps[t.id].map.getBounds();if(!e)throw new Error("Google Map Bounds could not be found.");return new $({southwest:{lat:e.getSouthWest().lat(),lng:e.getSouthWest().lng()},center:{lat:e.getCenter().lat(),lng:e.getCenter().lng()},northeast:{lat:e.getNorthEast().lat(),lng:e.getNorthEast().lng()}})}async addMarkers(t){const e=[],n=this.maps[t.id];for(const s of t.markers){const i=this.buildMarkerOpts(s,n.map),a=new google.maps.Marker(i),l=""+this.currMarkerId;n.markers[l]=a,this.setMarkerListeners(t.id,l,a),e.push(l),this.currMarkerId++}return{ids:e}}async addMarker(t){const e=this.buildMarkerOpts(t.marker,this.maps[t.id].map),n=new google.maps.Marker(e),s=""+this.currMarkerId;return this.maps[t.id].markers[s]=n,this.setMarkerListeners(t.id,s,n),this.currMarkerId++,{id:s}}async removeMarkers(t){const e=this.maps[t.id];for(const n of t.markerIds)e.markers[n].setMap(null),delete e.markers[n]}async removeMarker(t){this.maps[t.id].markers[t.markerId].setMap(null),delete this.maps[t.id].markers[t.markerId]}async enableClustering(t){var e;const n=[];for(const s in this.maps[t.id].markers)n.push(this.maps[t.id].markers[s]);this.maps[t.id].markerClusterer=new lt({map:this.maps[t.id].map,markers:n,algorithm:new G({minPoints:(e=t.minClusterSize)!==null&&e!==void 0?e:4}),onClusterClick:this.onClusterClickHandler})}async disableClustering(t){var e;(e=this.maps[t.id].markerClusterer)===null||e===void 0||e.setMap(null),this.maps[t.id].markerClusterer=void 0}async onScroll(t){throw new Error("Method not supported on web.")}async create(t){console.log(`Create map: ${t.id}`),await this.importGoogleLib(t.apiKey),this.maps[t.id]={map:new window.google.maps.Map(t.element,Object.assign({},t.config)),element:t.element,markers:{}},this.setMapListeners(t.id)}async destroy(t){console.log(`Destroy map: ${t.id}`);const e=this.maps[t.id];e.element.innerHTML="",e.map.unbindAll(),delete this.maps[t.id]}async mapBoundsContains(t){const e=this.getLatLngBounds(t.bounds),n=new google.maps.LatLng(t.point.lat,t.point.lng);return{contains:e.contains(n)}}getLatLngBounds(t){return new google.maps.LatLngBounds(new google.maps.LatLng(t.southwest.lat,t.southwest.lng),new google.maps.LatLng(t.northeast.lat,t.northeast.lng))}async setMarkerListeners(t,e,n){n.addListener("click",()=>{var s,i;this.notifyListeners("onMarkerClick",{mapId:t,markerId:e,latitude:(s=n.getPosition())===null||s===void 0?void 0:s.lat(),longitude:(i=n.getPosition())===null||i===void 0?void 0:i.lng(),title:n.getTitle(),snippet:""})}),n.addListener("dragstart",()=>{var s,i;this.notifyListeners("onMarkerDragStart",{mapId:t,markerId:e,latitude:(s=n.getPosition())===null||s===void 0?void 0:s.lat(),longitude:(i=n.getPosition())===null||i===void 0?void 0:i.lng(),title:n.getTitle(),snippet:""})}),n.addListener("drag",()=>{var s,i;this.notifyListeners("onMarkerDrag",{mapId:t,markerId:e,latitude:(s=n.getPosition())===null||s===void 0?void 0:s.lat(),longitude:(i=n.getPosition())===null||i===void 0?void 0:i.lng(),title:n.getTitle(),snippet:""})}),n.addListener("dragend",()=>{var s,i;this.notifyListeners("onMarkerDragEnd",{mapId:t,markerId:e,latitude:(s=n.getPosition())===null||s===void 0?void 0:s.lat(),longitude:(i=n.getPosition())===null||i===void 0?void 0:i.lng(),title:n.getTitle(),snippet:""})})}async setMapListeners(t){const e=this.maps[t].map;e.addListener("idle",async()=>{var n,s;const i=await this.getMapBounds({id:t});this.notifyListeners("onCameraIdle",{mapId:t,bearing:e.getHeading(),bounds:i,latitude:(n=e.getCenter())===null||n===void 0?void 0:n.lat(),longitude:(s=e.getCenter())===null||s===void 0?void 0:s.lng(),tilt:e.getTilt(),zoom:e.getZoom()})}),e.addListener("center_changed",()=>{this.notifyListeners("onCameraMoveStarted",{mapId:t,isGesture:!0})}),e.addListener("bounds_changed",async()=>{var n,s;const i=await this.getMapBounds({id:t});this.notifyListeners("onBoundsChanged",{mapId:t,bearing:e.getHeading(),bounds:i,latitude:(n=e.getCenter())===null||n===void 0?void 0:n.lat(),longitude:(s=e.getCenter())===null||s===void 0?void 0:s.lng(),tilt:e.getTilt(),zoom:e.getZoom()})}),e.addListener("click",n=>{var s,i;this.notifyListeners("onMapClick",{mapId:t,latitude:(s=n.latLng)===null||s===void 0?void 0:s.lat(),longitude:(i=n.latLng)===null||i===void 0?void 0:i.lng()})}),this.notifyListeners("onMapReady",{mapId:t})}buildMarkerOpts(t,e){let n;return t.iconUrl&&(n={url:t.iconUrl,scaledSize:t.iconSize?new google.maps.Size(t.iconSize.width,t.iconSize.height):null,anchor:t.iconAnchor?new google.maps.Point(t.iconAnchor.x,t.iconAnchor.y):new google.maps.Point(0,0),origin:t.iconOrigin?new google.maps.Point(t.iconOrigin.x,t.iconOrigin.y):new google.maps.Point(0,0)}),{position:t.coordinate,map:e,opacity:t.opacity,title:t.title,icon:n,draggable:t.draggable}}}export{ut as CapacitorGoogleMapsWeb};
